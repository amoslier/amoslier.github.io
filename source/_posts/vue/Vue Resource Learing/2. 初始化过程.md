---
title: Vue源码学习 - 初始化过程
categories:
  - [Vue,源码]
tags: 
---

# Vue 初始化过程

## 入口

```js
										// src/core/instance/index.js
function Vue(options) {
  // Vue.prototype._init
  this._init(options)
}

initMixin(); // 定义 _init
```

## initMixin

-  处理组件配置项 
  - 子组件性能优化 initInternalComponent(vm, options) 打平配置项，避免原型链查找，提高效率
  - 根组件选项合并
- initCycle(vm) 
  - 定义关系属性 $parent $children $root $refs
- initEvent(vm)
  -  初始化自定义事件
- initRender(vm)
  - 初始化插槽，获取 `this.$slots，定义 this._c，即 create Element 方法，平时使用的 h 函数
- callHook(vm, 'beforeCreate')
- initInjecttions(vm)
  - 针对 provide/inject，数据注入，一般使用在封装高阶插件的时候使用，不推荐在普通应用程序中使用
  - 初始化 inject 选项，得到 {key: val} 形式的配置对象，并做响应式处理
  - provide 实际上并非真正的注入到每一个子代，而是存在祖代的，通过 inject 向上查询 provide 选项
- initState(vm)
  - 响应式原理核心，处理 props、methods、computed、data、watch
- initProvide(vm) 
- callHook(vm, 'created')
-  挂载



